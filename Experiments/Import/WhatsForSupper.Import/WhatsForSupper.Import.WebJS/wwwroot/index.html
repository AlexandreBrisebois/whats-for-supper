<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>What's for Supper - Add Recipe (WebJS)</title>
    <link rel="stylesheet" href="css/app.css" />
    <style>
        /* Ensure unknown button is visually selected on page load */
        .rating-btn[data-rating="0"] {
            background: var(--brand-primary);
            border-color: var(--brand-primary);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
    </style>
</head>
<body>
    <div class="recipe-form-container">
        <div class="recipe-form-header">
            <h1>Add New Recipe</h1>
        </div>

        <!-- Photo Upload Section -->
        <div class="photo-upload-section">
            <div id="photoPlaceholder" class="photo-placeholder">
                <label for="photoInput" class="photo-upload-label">
                    <svg class="photo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    <span>Tap to add photos</span>
                </label>
            </div>
            
            <div id="photoGallery" class="photo-gallery" style="display: none;">
                <div id="photoItems" class="photo-items"></div>
                <label for="photoInput" class="photo-add-more">
                    <span>+</span>
                </label>
            </div>
            
            <input type="file" id="photoInput" accept="image/*" capture="environment" hidden multiple />
        </div>

        <!-- Recipe Details -->
        <div class="recipe-details">
            <div class="rating-section">
                <h2>Rate this recipe</h2>
                <div class="rating-options">
                    <button class="rating-btn active" data-rating="0" title="Unknown">
                        <span class="rating-emoji">‚ùì</span>
                    </button>
                    <button class="rating-btn" data-rating="1" title="Dislike">
                        <span class="rating-emoji">üëé</span>
                    </button>
                    <button class="rating-btn" data-rating="2" title="Like">
                        <span class="rating-emoji">üëç</span>
                    </button>
                    <button class="rating-btn" data-rating="3" title="Love">
                        <span class="rating-emoji">‚ù§Ô∏è</span>
                    </button>
                </div>
            </div>

            <div id="statusMessage" class="alert" style="display: none;"></div>

            <div id="uploadProgress" class="upload-progress" style="display: none;">
                <div class="spinner"></div>
                <p>Saving recipe...</p>
            </div>
        </div>

        <!-- Footer Buttons -->
        <div class="recipe-form-footer">
            <button class="btn-cancel" id="btnCancelFooter">Cancel</button>
            <button class="btn-save-footer" id="btnSave">Save Recipe</button>
        </div>
    </div>

    <!-- Version marker for debugging -->
    <script>console.log('[WebJS] Version: 2025-01-21 v1.1');</script>
    <script src="js/app.js"></script>
</body>
</html>
